<table mat-table [dataSource]="dataSource"
       [hidden]="!dataSource">

  <!--Name column-->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let habit" [ngStyle]="{'color': getColor(habit.color)}">{{habit.name}}</td>
  </ng-container>

  <!--Date columns-->
  <ng-container *ngFor="let date of displayedDates" matColumnDef="{{date}}">
    <th mat-header-cell *matHeaderCellDef>
      {{date}}
    </th>
    <td mat-cell *matCellDef="let habit" [hidden]="!habit.repetitions">
      <div class="rep" [ngSwitch]="habit.repetitions?.[displayedDates.indexOf(date)].value"
           [ngStyle]="{'color': getColor(habit.color)}">
        <button *ngSwitchCase="-1" mat-icon-button>
          <mat-icon>close</mat-icon>
        </button>
        <div class="rep" *ngSwitchCase="0">
          <button *ngIf="habit.type === 0" mat-icon-button>
            <mat-icon >close</mat-icon>
          </button>
          <button *ngIf="habit.type === 1" mat-flat-button style="transform: scale(1.7)"
                  [ngStyle]="{'color': getColor(habit.color)}">
            0
          </button>
        </div>
        <button *ngSwitchCase="2" mat-icon-button>
          <mat-icon>check</mat-icon>
        </button>
        <button *ngSwitchDefault mat-flat-button style="transform: scale(1.19)"
                [ngStyle]="{'color': getColor(habit.color)}">
          {{habit.repetitions?.[displayedDates.indexOf(date)].value / 1000}}
        </button>
      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
